selectBoxIt._dynamicPositioning=function(){var self=this,listOffsetTop=self.dropdown.offset().top,listHeight=self.list.data("max-height")||self.list.outerHeight(),selectBoxHeight=self.dropdown.outerHeight(),viewport=self.options.viewport,viewportHeight=viewport.height(),viewportScrollTop=$.isWindow(viewport.get(0))?viewport.scrollTop():viewport.offset().top,topToBottom=(listOffsetTop+selectBoxHeight+listHeight<=viewportHeight+viewportScrollTop),bottomReached=!topToBottom;if(!self.list.data("max-height")){self.list.data("max-height",self.list.outerHeight());}if(!bottomReached){self.list.css("max-height",listHeight);self.list.css("top","auto");}else{if((self.dropdown.offset().top-viewportScrollTop)>=listHeight){self.list.css("max-height",listHeight);self.list.css("top",(self.dropdown.position().top-self.list.outerHeight()));}else{var outsideBottomViewport=Math.abs((listOffsetTop+selectBoxHeight+listHeight)-(viewportHeight+viewportScrollTop)),outsideTopViewport=Math.abs((self.dropdown.offset().top-viewportScrollTop)-listHeight);if(outsideBottomViewport<outsideTopViewport){self.list.css("max-height",listHeight-outsideBottomViewport-(selectBoxHeight/2));self.list.css("top","auto");}else{self.list.css("max-height",listHeight-outsideTopViewport-(selectBoxHeight/2));self.list.css("top",(self.dropdown.position().top-self.list.outerHeight()));}}}return self;};