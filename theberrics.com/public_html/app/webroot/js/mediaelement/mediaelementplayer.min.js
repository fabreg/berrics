/*!
 * MediaElementPlayer
 * http://mediaelementjs.com/
 *
 * Creates a controller bar for HTML5 <video> add <audio> tags
 * using jQuery and MediaElement.js (HTML5 Flash/Silverlight wrapper)
 *
 * Copyright 2010, John Dyer (http://johndyer.me)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 */
(function($){mejs.MepDefaults={poster:"",defaultVideoWidth:480,defaultVideoHeight:270,videoWidth:-1,videoHeight:-1,audioWidth:400,audioHeight:30,startVolume:0.8,loop:false,enableAutosize:true,features:["playpause","current","progress","duration","tracks","volume","fullscreen"]};mejs.mepIndex=0;mejs.MediaElementPlayer=function($node,o){if(!(this instanceof mejs.MediaElementPlayer)){return new mejs.MediaElementPlayer($node,o);}var t=this,mf=mejs.MediaFeatures;t.options=$.extend({},mejs.MepDefaults,o);t.$media=t.$node=$($node);t.node=t.media=t.$media[0];if(typeof t.node.player!="undefined"){return t.node.player;}else{t.node.player=t;}t.isVideo=(t.media.tagName.toLowerCase()==="video");t.init();return t;};mejs.MediaElementPlayer.prototype={init:function(){var t=this,mf=mejs.MediaFeatures,meOptions=$.extend(true,{},t.options,{success:function(media,domNode){t.meReady(media,domNode);},error:function(e){t.handleError(e);}});if(mf.isiPad||mf.isiPhone){t.$media.attr("controls","controls");t.$media.removeAttr("poster");if(mf.isiPad&&t.media.getAttribute("autoplay")!==null){t.media.load();t.media.play();}}else{if(mf.isAndroid){if(t.isVideo){if(t.$media.find("source").length>0){t.media.src=t.$media.find('source[src$="mp4"]').attr("src");}t.$media.click(function(){t.media.play();});}else{}}else{t.$media.removeAttr("controls");t.id="mep_"+mejs.mepIndex++;t.container=$('<div id="'+t.id+'" class="mejs-container"><div class="mejs-inner"><div class="mejs-mediaelement"></div><div class="mejs-layers"></div><div class="mejs-controls"></div><div class="mejs-clear"></div></div></div>').addClass(t.$media[0].className).insertBefore(t.$media);t.container.find(".mejs-mediaelement").append(t.$media);t.controls=t.container.find(".mejs-controls");t.layers=t.container.find(".mejs-layers");if(t.isVideo){t.width=(t.options.videoWidth>0)?t.options.videoWidth:(t.$media[0].getAttribute("width")!==null)?t.$media.attr("width"):t.options.defaultVideoWidth;t.height=(t.options.videoHeight>0)?t.options.videoHeight:(t.$media[0].getAttribute("height")!==null)?t.$media.attr("height"):t.options.defaultVideoHeight;}else{t.width=t.options.audioWidth;t.height=t.options.audioHeight;}t.setPlayerSize(t.width,t.height);meOptions.pluginWidth=t.height;meOptions.pluginHeight=t.width;}}mejs.MediaElement(t.$media[0],meOptions);},meReady:function(media,domNode){var t=this,mf=mejs.MediaFeatures,f,feature;if(this.created){return;}else{this.created=true;}t.media=media;t.domNode=domNode;if(!mf.isiPhone&&!mf.isAndroid&&!mf.isiPad){t.buildposter(t,t.controls,t.layers,t.media);t.buildoverlays(t,t.controls,t.layers,t.media);t.findTracks();for(f in t.options.features){feature=t.options.features[f];if(t["build"+feature]){try{t["build"+feature](t,t.controls,t.layers,t.media);}catch(e){}}}t.setPlayerSize(t.width,t.height);t.setControlsSize();if(t.isVideo){t.container.bind("mouseenter",function(){t.controls.css("visibility","visible");t.controls.stop(true,true).fadeIn(200);}).bind("mouseleave",function(){if(!t.media.paused){t.controls.stop(true,true).fadeOut(200,function(){$(this).css("visibility","hidden");$(this).css("display","block");});}});if(t.domNode.getAttribute("autoplay")!==null){t.controls.css("visibility","hidden");}if(t.options.enableAutosize){t.media.addEventListener("loadedmetadata",function(e){if(t.options.videoHeight<=0&&t.domNode.getAttribute("height")===null&&!isNaN(e.target.videoHeight)){t.setPlayerSize(e.target.videoWidth,e.target.videoHeight);t.setControlsSize();t.media.setVideoSize(e.target.videoWidth,e.target.videoHeight);}},false);}}t.media.addEventListener("ended",function(e){t.media.setCurrentTime(0);t.media.pause();if(t.setProgressRail){t.setProgressRail();}if(t.setCurrentRail){t.setCurrentRail();}if(t.options.loop){t.media.play();}else{t.controls.css("visibility","visible");}},true);setTimeout(function(){t.setControlsSize();t.setPlayerSize(t.width,t.height);},50);}if(t.options.success){t.options.success(t.media,t.domNode);}},handleError:function(e){if(this.options.error){this.options.error(e);}},setPlayerSize:function(width,height){var t=this;t.width=parseInt(width,10);t.height=parseInt(height,10);t.container.width(t.width).height(t.height);t.layers.children("div.mejs-layer").width(t.width).height(t.height);},setControlsSize:function(){var t=this,usedWidth=0,railWidth=0,rail=t.controls.find(".mejs-time-rail"),total=t.controls.find(".mejs-time-total"),current=t.controls.find(".mejs-time-current"),loaded=t.controls.find(".mejs-time-loaded");others=rail.siblings();others.each(function(){if($(this).css("position")!="absolute"){usedWidth+=$(this).outerWidth(true);}});railWidth=t.controls.width()-usedWidth-(rail.outerWidth(true)-rail.outerWidth(false));rail.width(railWidth);total.width(railWidth-(total.outerWidth(true)-total.width()));if(t.setProgressRail){t.setProgressRail();}if(t.setCurrentRail){t.setCurrentRail();}},buildposter:function(player,controls,layers,media){var poster=$('<div class="mejs-poster mejs-layer"><img /></div>').appendTo(layers),posterUrl=player.$media.attr("poster"),posterImg=poster.find("img").width(player.width).height(player.height);if(player.options.poster!=""){posterImg.attr("src",player.options.poster);}else{if(posterUrl!==""&&posterUrl!=null){posterImg.attr("src",posterUrl);}else{poster.remove();}}media.addEventListener("play",function(){poster.hide();},false);},buildoverlays:function(player,controls,layers,media){if(!player.isVideo){return;}var loading=$('<div class="mejs-overlay mejs-layer"><div class="mejs-overlay-loading"><span></span></div></div>').hide().appendTo(layers),error=$('<div class="mejs-overlay mejs-layer"><div class="mejs-overlay-error"></div></div>').hide().appendTo(layers),bigPlay=$('<div class="mejs-overlay mejs-layer mejs-overlay-play"><div class="mejs-overlay-button"></div></div>').appendTo(layers).click(function(){if(media.paused){media.play();}else{media.pause();}});media.addEventListener("play",function(){bigPlay.hide();error.hide();},false);media.addEventListener("pause",function(){bigPlay.show();},false);media.addEventListener("loadstart",function(){loading.show();},false);media.addEventListener("canplay",function(){loading.hide();},false);media.addEventListener("error",function(){loading.hide();error.show();error.find("mejs-overlay-error").html("Error loading this resource");},false);},findTracks:function(){var t=this,tracktags=t.$media.find("track");t.tracks=[];tracktags.each(function(){t.tracks.push({srclang:$(this).attr("srclang").toLowerCase(),src:$(this).attr("src"),kind:$(this).attr("kind"),entries:[],isLoaded:false});});},changeSkin:function(className){this.container[0].className="mejs-container "+className;this.setPlayerSize();this.setControlsSize();},play:function(){this.media.play();},pause:function(){this.media.pause();},load:function(){this.media.load();},setMuted:function(muted){this.media.setMuted(muted);},setCurrentTime:function(time){this.media.setCurrentTime(time);},getCurrentTime:function(){return this.media.currentTime;},setVolume:function(volume){this.media.setVolume(volume);},getVolume:function(){return this.media.volume;},setSrc:function(src){this.media.setSrc(src);}};jQuery.fn.mediaelementplayer=function(options){return this.each(function(){new mejs.MediaElementPlayer($(this),options);});};window.MediaElementPlayer=mejs.MediaElementPlayer;})(jQuery);(function($){MediaElementPlayer.prototype.buildplaypause=function(player,controls,layers,media){var play=$('<div class="mejs-button mejs-playpause-button mejs-play"><span></span></div>').appendTo(controls).click(function(){if(media.paused){media.play();}else{media.pause();}});media.addEventListener("play",function(){play.removeClass("mejs-play").addClass("mejs-pause");},false);media.addEventListener("playing",function(){play.removeClass("mejs-play").addClass("mejs-pause");},false);media.addEventListener("pause",function(){play.removeClass("mejs-pause").addClass("mejs-play");},false);media.addEventListener("paused",function(){play.removeClass("mejs-pause").addClass("mejs-play");},false);};})(jQuery);(function($){MediaElementPlayer.prototype.buildstop=function(player,controls,layers,media){var stop=$('<div class="mejs-button mejs-stop-button mejs-stop"><span></span></div>').appendTo(controls).click(function(){if(!media.paused){media.pause();}if(media.currentTime>0){media.setCurrentTime(0);controls.find(".mejs-time-current").width("0px");controls.find(".mejs-time-handle").css("left","0px");controls.find(".mejs-time-float-current").html(mejs.Utility.secondsToTimeCode(0));controls.find(".mejs-currenttime").html(mejs.Utility.secondsToTimeCode(0));layers.find(".mejs-poster").show();}});};})(jQuery);(function($){MediaElementPlayer.prototype.buildprogress=function(player,controls,layers,media){$('<div class="mejs-time-rail"><span class="mejs-time-total"><span class="mejs-time-loaded"></span><span class="mejs-time-current"></span><span class="mejs-time-handle"></span><span class="mejs-time-float"><span class="mejs-time-float-current">00:00</span><span class="mejs-time-float-corner"></span></span></span></div>').appendTo(controls);var total=controls.find(".mejs-time-total"),loaded=controls.find(".mejs-time-loaded"),current=controls.find(".mejs-time-current"),handle=controls.find(".mejs-time-handle"),timefloat=controls.find(".mejs-time-float"),timefloatcurrent=controls.find(".mejs-time-float-current"),handleMouseMove=function(e){var x=e.pageX,offset=total.offset(),width=total.outerWidth(),percentage=0,newTime=0;if(x>offset.left&&x<=width+offset.left&&media.duration){percentage=((x-offset.left)/width);newTime=(percentage<=0.02)?0:percentage*media.duration;if(mouseIsDown){media.setCurrentTime(newTime);}var pos=x-offset.left;timefloat.css("left",pos);timefloatcurrent.html(mejs.Utility.secondsToTimeCode(newTime));}},mouseIsDown=false,mouseIsOver=false;total.bind("mousedown",function(e){mouseIsDown=true;handleMouseMove(e);return false;});controls.find(".mejs-time-rail").bind("mouseenter",function(e){mouseIsOver=true;}).bind("mouseleave",function(e){mouseIsOver=false;});$(document).bind("mouseup",function(e){mouseIsDown=false;}).bind("mousemove",function(e){if(mouseIsDown||mouseIsOver){handleMouseMove(e);}});media.addEventListener("progress",function(e){player.setCurrentRail(e);},false);media.addEventListener("timeupdate",function(e){player.setProgressRail(e);player.setCurrentRail(e);},false);};MediaElementPlayer.prototype.setProgressRail=function(e){var t=this,target=(e!=undefined)?e.target:t.media,percent=null,loaded=t.controls.find(".mejs-time-loaded"),total=t.controls.find(".mejs-time-total");if(target&&target.buffered&&target.buffered.length>0&&target.buffered.end&&target.duration){percent=target.buffered.end(0)/target.duration;}else{if(target&&target.bytesTotal!=undefined&&target.bytesTotal>0&&target.bufferedBytes!=undefined){percent=target.bufferedBytes/target.bytesTotal;}else{if(e&&e.lengthComputable&&e.total!=0){percent=e.loaded/e.total;}}}if(percent!==null){percent=Math.min(1,Math.max(0,percent));loaded.width(total.width()*percent);}};MediaElementPlayer.prototype.setCurrentRail=function(){var t=this,handle=t.controls.find(".mejs-time-handle"),current=t.controls.find(".mejs-time-current"),total=t.controls.find(".mejs-time-total");if(t.media.currentTime!=undefined&&t.media.duration){var newWidth=total.width()*t.media.currentTime/t.media.duration,handlePos=newWidth-(handle.outerWidth(true)/2);current.width(newWidth);handle.css("left",handlePos);}};})(jQuery);(function($){MediaElementPlayer.prototype.buildcurrent=function(player,controls,layers,media){$('<div class="mejs-time"><span class="mejs-currenttime">00:00</span></div>').appendTo(controls);media.addEventListener("timeupdate",function(){if(media.currentTime){controls.find(".mejs-currenttime").html(mejs.Utility.secondsToTimeCode(media.currentTime));}},false);};MediaElementPlayer.prototype.buildduration=function(player,controls,layers,media){if(controls.children().last().find(".mejs-currenttime").length>0){$(' <span> | </span> <span class="mejs-duration">00:00</span>').appendTo(controls.find(".mejs-time"));}else{$('<div class="mejs-time"><span class="mejs-duration">00:00</span></div>').appendTo(controls);}media.addEventListener("timeupdate",function(){if(media.duration){controls.find(".mejs-duration").html(mejs.Utility.secondsToTimeCode(media.duration));}},false);};})(jQuery);(function($){MediaElementPlayer.prototype.buildvolume=function(player,controls,layers,media){var mute=$('<div class="mejs-button mejs-volume-button mejs-mute"><span></span><div class="mejs-volume-slider"><div class="mejs-volume-total"></div><div class="mejs-volume-current"></div><div class="mejs-volume-handle"></div></div></div>').appendTo(controls),volumeSlider=mute.find(".mejs-volume-slider"),volumeTotal=mute.find(".mejs-volume-total"),volumeCurrent=mute.find(".mejs-volume-current"),volumeHandle=mute.find(".mejs-volume-handle"),positionVolumeHandle=function(volume){var top=volumeTotal.height()-(volumeTotal.height()*volume);volumeHandle.css("top",top-(volumeHandle.height()/2));volumeCurrent.height(volumeTotal.height()-top+parseInt(volumeTotal.css("top").replace(/px/,""),10));volumeCurrent.css("top",top);},handleVolumeMove=function(e){var railHeight=volumeTotal.height(),totalOffset=volumeTotal.offset(),totalTop=parseInt(volumeTotal.css("top").replace(/px/,""),10),newY=e.pageY-totalOffset.top,volume=(railHeight-newY)/railHeight;if(newY<0){newY=0;}else{if(newY>railHeight){newY=railHeight;}}volumeHandle.css("top",newY-(volumeHandle.height()/2)+totalTop);volumeCurrent.height(railHeight-newY);volumeCurrent.css("top",newY+totalTop);if(volume==0){media.setMuted(true);mute.removeClass("mejs-mute").addClass("mejs-unmute");}else{media.setMuted(false);mute.removeClass("mejs-unmute").addClass("mejs-mute");}volume=Math.max(0,volume);volume=Math.min(volume,1);media.setVolume(volume);},mouseIsDown=false;volumeSlider.bind("mousedown",function(e){handleVolumeMove(e);mouseIsDown=true;return false;});$(document).bind("mouseup",function(e){mouseIsDown=false;}).bind("mousemove",function(e){if(mouseIsDown){handleVolumeMove(e);}});mute.find("span").click(function(){if(media.muted){media.setMuted(false);mute.removeClass("mejs-unmute").addClass("mejs-mute");positionVolumeHandle(1);}else{media.setMuted(true);mute.removeClass("mejs-mute").addClass("mejs-unmute");positionVolumeHandle(0);}});media.addEventListener("volumechange",function(e){if(!mouseIsDown){positionVolumeHandle(e.target.volume);}},true);positionVolumeHandle(player.options.startVolume);media.setVolume(player.options.startVolume);};})(jQuery);(function($){MediaElementPlayer.prototype.buildfullscreen=function(player,controls,layers,media){if(!player.isVideo){return;}var normalHeight=0,normalWidth=0,container=player.container,fullscreenBtn=$('<div class="mejs-button mejs-fullscreen-button"><span></span></div>').appendTo(controls).click(function(){var goFullscreen=(mejs.MediaFeatures.hasNativeFullScreen)?!media.webkitDisplayingFullscreen:!media.isFullScreen;setFullScreen(goFullscreen);}),setFullScreen=function(goFullScreen){switch(media.pluginType){case"flash":case"silverlight":media.setFullscreen(goFullScreen);break;case"native":if(mejs.MediaFeatures.hasNativeFullScreen){if(goFullScreen){media.webkitEnterFullScreen();media.isFullScreen=true;}else{media.webkitExitFullScreen();media.isFullScreen=false;}}else{if(goFullScreen){normalHeight=player.$media.height();normalWidth=player.$media.width();container.addClass("mejs-container-fullscreen").width("100%").height("100%").css("z-index",1000);player.$media.width("100%").height("100%");layers.children("div").width("100%").height("100%");fullscreenBtn.removeClass("mejs-fullscreen").addClass("mejs-unfullscreen");player.setControlsSize();media.isFullScreen=true;}else{container.removeClass("mejs-container-fullscreen").width(normalWidth).height(normalHeight).css("z-index",1);player.$media.width(normalWidth).height(normalHeight);layers.children("div").width(normalWidth).height(normalHeight);fullscreenBtn.removeClass("mejs-unfullscreen").addClass("mejs-fullscreen");player.setControlsSize();media.isFullScreen=false;}}}};$(document).bind("keydown",function(e){if(media.isFullScreen&&e.keyCode==27){setFullScreen(false);}});};})(jQuery);(function($){$.extend(mejs.MepDefaults,{startLanguage:"",translations:[],translationSelector:false,googleApiKey:""});$.extend(MediaElementPlayer.prototype,{buildtracks:function(player,controls,layers,media){if(!player.isVideo){return;}if(player.tracks.length==0){return;}var i,options="";player.chapters=$('<div class="mejs-chapters mejs-layer"></div>').prependTo(layers).hide();player.captions=$('<div class="mejs-captions-layer mejs-layer"><div class="mejs-captions-position"><span class="mejs-captions-text"></span></div></div>').prependTo(layers).hide();player.captionsText=player.captions.find(".mejs-captions-text");player.captionsButton=$('<div class="mejs-button mejs-captions-button"><span></span><div class="mejs-captions-selector"><ul><li><input type="radio" name="'+player.id+'_captions" id="'+player.id+'_captions_none" value="none" checked="checked" /><label for="'+player.id+'_captions_none">None</label></li></ul></div></div>').appendTo(controls).delegate("input[type=radio]","click",function(){lang=this.value;if(lang=="none"){player.selectedTrack=null;}else{for(i=0;i<player.tracks.length;i++){if(player.tracks[i].srclang==lang){player.selectedTrack=player.tracks[i];player.captions.attr("lang",player.selectedTrack.srclang);player.displayCaptions();break;}}}});player.container.bind("mouseenter",function(){player.container.find(".mejs-captions-position").addClass("mejs-captions-position-hover");}).bind("mouseleave",function(){if(!media.paused){player.container.find(".mejs-captions-position").removeClass("mejs-captions-position-hover");}});player.trackToLoad=-1;player.selectedTrack=null;player.isLoadingTrack=false;if(player.tracks.length>0&&player.options.translations.length>0){for(i=0;i<player.options.translations.length;i++){player.tracks.push({srclang:player.options.translations[i].toLowerCase(),src:null,kind:"subtitles",entries:[],isLoaded:false,isTranslation:true});}}for(i=0;i<player.tracks.length;i++){if(player.tracks[i].kind=="subtitles"){player.addTrackButton(player.tracks[i].srclang,player.tracks[i].isTranslation);}}player.loadNextTrack();media.addEventListener("timeupdate",function(e){player.displayCaptions();},false);media.addEventListener("loadedmetadata",function(e){player.displayChapters();},false);player.container.hover(function(){player.chapters.css("visibility","visible");player.chapters.fadeIn(200);},function(){if(!media.paused){player.chapters.fadeOut(200,function(){$(this).css("visibility","hidden");$(this).css("display","block");});}});if(media.getAttribute("autoplay")!==null){player.chapters.css("visibility","hidden");}if(player.options.translationSelector){for(i in mejs.language.codes){options+='<option value="'+i+'">'+mejs.language.codes[i]+"</option>";}player.container.find(".mejs-captions-selector ul").before($('<select class="mejs-captions-translations"><option value="">--Add Translation--</option>'+options+"</select>"));player.container.find(".mejs-captions-translations").change(function(){var option=$(this);lang=option.val();if(lang!=""){player.tracks.push({srclang:lang,src:null,entries:[],isLoaded:false,isTranslation:true});if(!player.isLoadingTrack){player.trackToLoad--;player.addTrackButton(lang,true);player.options.startLanguage=lang;player.loadNextTrack();}}});}},loadNextTrack:function(){var t=this;t.trackToLoad++;if(t.trackToLoad<t.tracks.length){t.isLoadingTrack=true;t.loadTrack(t.trackToLoad);}else{t.isLoadingTrack=false;}},loadTrack:function(index){var t=this,track=t.tracks[index],after=function(){track.isLoaded=true;t.enableTrackButton(track.srclang);t.loadNextTrack();};if(track.isTranslation){mejs.SrtParser.translateSrt(t.tracks[0].entries,t.tracks[0].srclang,track.srclang,t.options.googleApiKey,function(newOne){track.entries=newOne;after();});}else{$.ajax({url:track.src,success:function(d){track.entries=mejs.SrtParser.parse(d);after();if(track.kind=="chapters"&&t.media.duration>0){t.drawChapters(track);}},error:function(){t.loadNextTrack();}});}},enableTrackButton:function(lang){var t=this;t.captionsButton.find("input[value="+lang+"]").attr("disabled","").siblings("label").html(mejs.language.codes[lang]||lang);if(t.options.startLanguage==lang){$("#"+t.id+"_captions_"+lang).click();}t.adjustLanguageBox();},addTrackButton:function(lang,isTranslation){var t=this,l=mejs.language.codes[lang]||lang;t.captionsButton.find("ul").append($('<li><input type="radio" name="'+t.id+'_captions" id="'+t.id+"_captions_"+lang+'" value="'+lang+'" disabled="disabled" /><label for="'+t.id+"_captions_"+lang+'">'+l+((isTranslation)?" (translating)":" (loading)")+"</label></li>"));t.adjustLanguageBox();t.container.find(".mejs-captions-translations option[value="+lang+"]").remove();},adjustLanguageBox:function(){var t=this;t.captionsButton.find(".mejs-captions-selector").height(t.captionsButton.find(".mejs-captions-selector ul").outerHeight(true)+t.captionsButton.find(".mejs-captions-translations").outerHeight(true));},displayCaptions:function(){if(typeof this.tracks=="undefined"){return;}var t=this,i,track=t.selectedTrack;if(track!=null&&track.isLoaded){for(i=0;i<track.entries.times.length;i++){if(t.media.currentTime>=track.entries.times[i].start&&t.media.currentTime<=track.entries.times[i].stop){t.captionsText.html(track.entries.text[i]);t.captions.show();return;}}t.captions.hide();}else{t.captions.hide();}},displayChapters:function(){var t=this,i;for(i=0;i<t.tracks.length;i++){if(t.tracks[i].kind=="chapters"&&t.tracks[i].isLoaded){t.drawChapters(t.tracks[i]);break;}}},drawChapters:function(chapters){var t=this,i,dur,percent=0,usedPercent=0;t.chapters.empty();for(i=0;i<chapters.entries.times.length;i++){dur=chapters.entries.times[i].stop-chapters.entries.times[i].start;percent=Math.floor(dur/t.media.duration*100);if(percent+usedPercent>100||i==chapters.entries.times.length-1&&percent+usedPercent<100){percent=100-usedPercent;}t.chapters.append($('<div class="mejs-chapter" rel="'+chapters.entries.times[i].start+'" style="left: '+usedPercent.toString()+"%;width: "+percent.toString()+'%;"><div class="mejs-chapter-block'+((i==chapters.entries.times.length-1)?" mejs-chapter-block-last":"")+'"><span class="ch-title">'+chapters.entries.text[i]+'</span><span class="ch-time">'+mejs.Utility.secondsToTimeCode(chapters.entries.times[i].start)+"&ndash;"+mejs.Utility.secondsToTimeCode(chapters.entries.times[i].stop)+"</span></div></div>"));usedPercent+=percent;}t.chapters.find("div.mejs-chapter").click(function(){t.media.setCurrentTime(parseFloat($(this).attr("rel")));if(t.media.paused){t.media.play();}});t.chapters.show();}});mejs.language={codes:{af:"Afrikaans",sq:"Albanian",ar:"Arabic",be:"Belarusian",bg:"Bulgarian",ca:"Catalan",zh:"Chinese","zh-cn":"Chinese Simplified","zh-tw":"Chinese Traditional",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch",en:"English",et:"Estonian",tl:"Filipino",fi:"Finnish",fr:"French",gl:"Galician",de:"German",el:"Greek",ht:"Haitian Creole",iw:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",ga:"Irish",it:"Italian",ja:"Japanese",ko:"Korean",lv:"Latvian",lt:"Lithuanian",mk:"Macedonian",ms:"Malay",mt:"Maltese",no:"Norwegian",fa:"Persian",pl:"Polish",pt:"Portuguese",ro:"Romanian",ru:"Russian",sr:"Serbian",sk:"Slovak",sl:"Slovenian",es:"Spanish",sw:"Swahili",sv:"Swedish",tl:"Tagalog",th:"Thai",tr:"Turkish",uk:"Ukrainian",vi:"Vietnamese",cy:"Welsh",yi:"Yiddish"}};mejs.SrtParser={pattern_identifier:/^[0-9]+$/,pattern_timecode:/^([0-9]{2}:[0-9]{2}:[0-9]{2}(,[0-9]{1,3})?) --\> ([0-9]{2}:[0-9]{2}:[0-9]{2}(,[0-9]{3})?)(.*)$/,timecodeToSeconds:function(timecode){var tab=timecode.split(":");return tab[0]*60*60+tab[1]*60+parseFloat(tab[2].replace(",","."));},split2:function(text,regex){return text.split(regex);},parse:function(srtText){var i=0,lines=this.split2(srtText,/\r?\n/),entries={text:[],times:[]},timecode,text;for(;i<lines.length;i++){if(this.pattern_identifier.exec(lines[i])){i++;timecode=this.pattern_timecode.exec(lines[i]);if(timecode&&i<lines.length){i++;text=lines[i];i++;while(lines[i]!==""&&i<lines.length){text=text+"\n"+lines[i];i++;}entries.text.push(text);entries.times.push({start:this.timecodeToSeconds(timecode[1]),stop:this.timecodeToSeconds(timecode[3]),settings:timecode[5]});}}}return entries;},translateSrt:function(srtData,fromLang,toLang,googleApiKey,callback){var entries={text:[],times:[]},lines,i;this.translateText(srtData.text.join(" <a></a>"),fromLang,toLang,googleApiKey,function(result){lines=result.split("<a></a>");for(i=0;i<srtData.text.length;i++){entries.text[i]=lines[i];entries.times[i]={start:srtData.times[i].start,stop:srtData.times[i].stop,settings:srtData.times[i].settings};}callback(entries);});},translateText:function(text,fromLang,toLang,googleApiKey,callback){var separatorIndex,chunks=[],chunk,maxlength=1000,result="",nextChunk=function(){if(chunks.length>0){chunk=chunks.shift();mejs.SrtParser.translateChunk(chunk,fromLang,toLang,googleApiKey,function(r){if(r!="undefined"){result+=r;}nextChunk();});}else{callback(result);}};while(text.length>0){if(text.length>maxlength){separatorIndex=text.lastIndexOf(".",maxlength);chunks.push(text.substring(0,separatorIndex));text=text.substring(separatorIndex+1);}else{chunks.push(text);text="";}}nextChunk();},translateChunk:function(text,fromLang,toLang,googleApiKey,callback){var data={q:text,langpair:fromLang+"|"+toLang,v:"1.0"};if(googleApiKey!==""&&googleApiKey!==null){data.key=googleApiKey;}$.ajax({url:"https://ajax.googleapis.com/ajax/services/language/translate",data:data,type:"GET",dataType:"jsonp",success:function(d){callback(d.responseData.translatedText);},error:function(e){callback(null);}});}};if("x\n\ny".split(/\n/gi).length!=3){mejs.SrtParser.split2=function(text,regex){var parts=[],chunk="",i;for(i=0;i<text.length;i++){chunk+=text.substring(i,i+1);if(regex.test(chunk)){parts.push(chunk.replace(regex,""));chunk="";}}parts.push(chunk);return parts;};}})(jQuery);